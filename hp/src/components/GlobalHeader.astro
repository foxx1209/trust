---
import { Image } from 'astro:assets';
import Logo from "../assets/images/logo.png";

const baseUrl = import.meta.env.BASE_URL;

---

<header class="header header-fix">
  <div class="header__inner">
    <div class="header__content">
      <h1 class="header__logo">
        <a href={`${baseUrl}`}>
          <Image src={Logo} alt="TrustLink" decoding="async" loading="eager" />
        </a>
      </h1>
      <button class="header__btn">
        <span class="header__btn-line"></span>
        <span class="header__btn-line"></span>
        <span class="header__btn-line"></span>
      </button>
      <nav class="header__nav-sp">
        <ul class="header__list-sp">
          <div class="header__list-sp-inner">
            <li class="header__item-sp"><a href={`${baseUrl}btob`} class="header__link-sp">BtoBマーケティング支援</a></li>
            <li class="header__item-sp"><a href={`${baseUrl}ai`} class="header__link-sp">生成AIソリューション支援</a></li>
            <li class="header__item-sp"><a href={`${baseUrl}column`} class="header__link-sp">コラム</a></li>
            <li class="header__item-sp"><a href={`${baseUrl}company`} class="header__link-sp">会社概要</a></li>
          </div>
          <div class="header__list-sp-buttons">
          <li class="header__item-sp header__item-sp--btn"><a href={`${baseUrl}download-form`} class="header__link-sp header__link-sp-btn">資料ダウンロード</a></li>
          <li class="header__item-sp"><a href={`${baseUrl}form`} class="header__link-sp header__link-sp-btn--blue">お問い合わせ</a></li>
          </div>
        </ul>
      </nav>

      <nav class="header__nav">
        <ul class="header__list">
          <li class="header__item header__item--drop">支援内容
          <ul class="header__drop-list">
            <li class="header__item"><a href={`${baseUrl}btob`} class="header__link">BtoBマーケティング支援</a></li>
            <li class="header__item"><a href={`${baseUrl}ai`} class="header__link">生成AIソリューション支援</a></li>
          </ul>
        </li>
          <li class="header__item"><a href={`${baseUrl}column`} class="header__link">コラム</a></li>
          <li class="header__item"><a href={`${baseUrl}company`} class="header__link">会社概要</a></li>
          <li class="header__item"><a href={`${baseUrl}download-form`} class="header__link">資料ダウンロード</a></li>
          <li class="header__item"><a href={`${baseUrl}form`} class="header__link header__link-btn"><span>お問い合わせ</span></a></li>
        </ul>
      </nav>
    </div>
    
  </div>
</header>

<style>

 .header {
 inline-size: 100%;
block-size: calc(55* var(--torem));
position: relative;
z-index: 100;
@media(width >= 48rem) {
  block-size: calc(67* var(--torem));
}
 }
.header-fix{
  position: fixed;
  top: calc(20* var(--torem));
  block-size: calc(55* var(--torem));
  left: 0;
  right: 0;
  z-index: 100;
  @media(width >= 48rem) {
        block-size: calc(67* var(--torem));


  }
}

.header__inner {
  padding: 0 calc(10* var(--torem));
  block-size: inherit;
  @media(width >= 48rem) {
    padding: 0 fluid(5px 30px);

  }

}

.header__content {
display: flex;
align-items: center;
justify-content: space-between;
block-size: inherit;
max-inline-size: calc(1320* var(--torem));
inline-size: 100%;
margin-inline: auto;
padding: 0 calc(10* var(--torem));
background: linear-gradient(90deg, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0.2) 100%);
backdrop-filter: blur(20px);
border-radius: 30px;
@media(width >= 48rem) {
  padding: 0 fluid(5px 30px);
}

}

.header__logo {
  max-inline-size: calc(114* var(--torem));
  inline-size: 100%;
  @media(width >= 48rem) {
    max-inline-size: calc(212* var(--torem));

  
}

}
.header__logo img{
  inline-size: 100%;
  block-size: 100%;
  aspect-ratio: 114 / 23;
  object-fit: contain;
  @media(width >= 48rem) {
  aspect-ratio: 212 / 42;
}
}

.header__btn {
display: block;
inline-size: calc(41* var(--torem));
block-size: calc(41* var(--torem));
background: linear-gradient(86.82deg, #20377A 4.26%, #2C85C5 92.99%);
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
flex-direction: column;
gap: calc(6* var(--torem));
padding: 0 calc(10* var(--torem));
border: none;
cursor: pointer;
@media(width >= 48rem) {
  display: none;
}
}

.header__btn-line {
display: block;
inline-size: calc(20* var(--torem));
background-color: var(--white);
block-size: calc(1* var(--torem));
transition: all 0.3s ease-in-out;

}
.header__btn-line.is-active{
transform: translateY(calc(3* var(--torem))) rotate(45deg);
}
.header__btn-line.is-active:nth-child(2){
  display: none;
}
.header__btn-line.is-active:nth-child(3){
  transform: translateY(calc(-4* var(--torem))) rotate(-45deg);
}
.header__btn-line:nth-child(2){
  inline-size: calc(15* var(--torem));
  block-size: calc(1* var(--torem));
  margin-inline-end: auto;
}



.header__nav-sp {

  inline-size: 100%;
  block-size: calc(100vh + 20px);
   margin-inline: calc(50% - 50vw);
  background: url("../assets/images/nav-bg.png") no-repeat top center / cover;
  position: fixed;
    top: calc(-20* var(--torem));
  left: 0;
  inline-size: 100vw;
  z-index: -1;
  transition: all 0.3s allow-discrete;
  display: none;
  opacity: 0;
    padding-top: calc(77* var(--torem));

  @starting-style {
    opacity: 0;
  }
    
  }
.header__nav-sp.is-active{
  display: block;
  opacity: 1;
  bottom: 0;
  transition: all 0.3s allow-discrete;
  @starting-style {
    opacity: 0;
  }
 
}


.header__list-sp {
 display: flex;
  align-items: center;
  justify-content: flex-start;
  flex-direction: column;
  overflow-y: auto;
   padding-top: calc(43* var(--torem));
   padding-bottom: calc(120* var(--torem));
  max-height:100svh;
  gap: calc(40* var(--torem));
}

.header__item-sp {

}
.header__list-sp-inner{
 display: grid;
 place-items: center;
 gap: calc(40* var(--torem));
}

.header__link-sp {
font-size: calc(15* var(--torem));
font-weight: 600;
letter-spacing: 0.05em;
text-decoration: none;

}

.header__nav {
  display: none;
@media(width >= 48rem) {
  display: block;
  block-size: inherit;
}
}

.header__list {
display: flex;
align-items: center;
gap: fluid(1px 40px);
  block-size: inherit;

}
.header__item{
  display: grid;
  place-content: center;
    block-size: inherit;
cursor: pointer;
}

.header__link {
  @media (any-hover: hover) {
    transition: 0.3s;
    &:hover {
      cursor: pointer;
      opacity: 0.6;
    }
  }
}


.header__link {
font-size: fluid(13px 16px);
font-weight: 500;
display: grid;
place-items: center;
block-size: inherit;
text-decoration: none;
cursor: pointer;


}
.header__list-sp-buttons{
  display: grid;
  place-items: center;
  gap: calc(20* var(--torem));
}
.header__link-btn{
    margin-inline-start: calc(-8* var(--torem));
background: linear-gradient(86.82deg, #20377A 4.26%, #2C85C5 92.99%);
border-radius: 100px;
font-weight: 700;
color: var(--white);
block-size: calc(46* var(--torem));
inline-size:fluid(140px 167px);
display: grid;
place-items: center;
text-align: center;
padding: calc(11* var(--torem)) ;
text-decoration: none;
position: relative;
transition: all 0.3s ease;
overflow: hidden;
}
@media (any-hover: hover) {
.header__link-btn:hover{
  opacity: 1;
}
}
.header__link-btn::before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: linear-gradient(86.82deg, #2C85C5 4.26%, #20377A 92.99%);
opacity: 0;
transition: opacity 0.3s ease;
z-index: 0;
}
@media (any-hover: hover) {
.header__link-btn:hover::before {
opacity: 1;
}
}

.header__link-btn span {
position: relative;
z-index: 1;
}


.header__item-sp--btn{
  background-color: var(--white);
  border-radius: 100px;

}
.header__link-sp-btn{
  display: block;
  inline-size: calc(150* var(--torem));
  font-size: calc(12* var(--torem));
  font-weight: 500;
  text-align: center;
  padding: calc(9* var(--torem));
  letter-spacing: 0.05em;
  background: #FFFFFF;
  border-radius: 100px;
  position: relative;
  background: linear-gradient(86.82deg, #20377A 4.26%, #2C85C5 92.99%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-fill-color: transparent;
}


.header__link-sp-btn::before {
  content: '';
  position: absolute;
  top: -1px;
  left: -1px;
  right: -1px;
  bottom: -1px;
  background: linear-gradient(86.82deg, #20377A 4.26%, #2C85C5 92.99%);
  border-radius:100px;
  z-index: -1;
}
.header__link-sp-btn--blue::before{
  display: none;
}
.header__link-sp-btn--blue{
inline-size: calc(150* var(--torem));
display: block;
text-align: center;
color: var(--white);
font-size: calc(12* var(--torem));
font-weight: 500;
letter-spacing: 0.05em;
padding: calc(9* var(--torem));
background: linear-gradient(86.82deg, #20377A 4.26%, #2C85C5 92.99%);
border-radius: 100px;

}
.header__item--drop{
  position: relative;
  text-align: center;
  display: flex;
  align-items: center;
  gap: calc(5* var(--torem));
  font-weight: 500;
}
.header__item--drop::after{
  content: '';
  display: block;
  inline-size: calc(10* var(--torem));
  block-size: calc(10* var(--torem));
  background: url("../assets/images/header-arrow.webp") no-repeat center center / contain;
}
.header__drop-list{
  display: grid;
  gap: calc(20* var(--torem));
  padding: calc(20* var(--torem));
  opacity: 0;
  visibility: hidden;
  position: absolute;
  bottom: calc(-115* var(--torem));
  left: 0;
  top: 66px;
  inline-size: calc(243* var(--torem));
  background: var(--white);
  border-radius: 5px;
  transition: 
    opacity 0.3s ease,
    visibility 0.3s ease;
}
@media (any-hover: hover) {
.header__item--drop:hover .header__drop-list{
  opacity: 1;
  visibility: visible;
  transition: 
    opacity 0.3s ease,
    visibility 0.3s ease;
}
}
</style>

<script>
  const headerBtnLine = document.querySelectorAll('.header__btn-line');
  const headerNavSp = document.querySelector('.header__nav-sp');
  const headerBtn = document.querySelector('.header__btn');
  
  if (headerBtn && headerNavSp) {
    headerBtn.addEventListener('click', () => {
      headerBtnLine.forEach(line => {
        line.classList.toggle('is-active');
      });
      headerNavSp.classList.toggle('is-active');
    });
  }

</script>
